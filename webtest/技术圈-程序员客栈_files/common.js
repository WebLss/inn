!function(){({init:function(){this.NProgress(),this.logOut(),this.friendLinksHandle(),this.track(),this.popupInit(),this.uploadImg(),this.switchUser(),this.workPing(),this.getCaptchaImage(),this.initRating(),this.showLogin(),this.initInnFunction()},NProgress:function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){NProgress.start(),$(document).ready(function(){$(".dropdown").dropdown({transition:"drop"}),$(".i_header .dropdown").dropdown({on:"hover"}),$(".solution").dropdown({on:"hover"}),$("#top-menu .message .close").on("click",function(){$(this).closest(".message").fadeOut()}),$(".ui.checkbox").checkbox(),$(".header").popup(),$(".verify a").popup(),$(".verify_tag").popup(),$(".progress").popup(),$(".popup").popup(),$(".basic.test.modal").modal("show"),$(".menu .item").tab()}),$(window).load(function(){NProgress.done()})}),logOut:function(){$(".J_LogOut").on("click",function(){indexedDB.deleteDatabase("localforage"),window.location.href="/user/quit"})},friendLinksHandle:function(){$(".friend-links .list").each(function(){$(this).height()>30&&$(this).next().show()}),$(".friend-links .more").on("click",function(){var n=$(this).text();$(this).text("更多"==n?"收起":"更多"),$(this).parent().toggleClass("open")})},track:function(){$(document).on("click","[track]",function(){var n=this.getAttribute("track").split(","),t=n[0],i=n[1],o="";n[2]?o=n[2]:this.innerText&&(o=this.innerText),_czc.push(["_trackEvent",t,i,o])})},popupInit:function(){$("[data-content]").popup(),$("[data-html]").popup()},uploadImg:function(){$(".inn-upload").on("click",".J_DelThumb",function(){$(this).remove()})},switchUser:function(){$(".J_SwitchUser").on("click",function(){var n=$(this).data("type"),t=$(this).data("href");$(this).addClass("u-loading"),$.ajax({type:"POST",url:"/api/user/update_info",data:{home_page_type:1==n?2:1},success:function(n){location.href=t},complete:function(){$(this).removeClass("u-loading")}})})},workPing:function(){$(".J_WorkPing").on("click",function(){var n=this;if($(n).hasClass("busy"))return!1;$(n).addClass("u-loading"),$.ajax({type:"POST",url:"/api/remote/ping",dataType:"json",success:function(t){if($(n).removeClass("u-loading"),1==t.status){var i=localStorage.inn_workTime,o=($(n).data("pingtime"),parseInt((new Date).getTime()/1e3));if($(n).addClass("busy").attr("data-content","今天您已经 Ping 过啦，明天可以继续提醒我们 :)"),$(n).html("已Ping"),o-i>2592e3||!i)return void inn.widget.confirm({message:"<div style='font-size: 18px;margin-top: 30px;'>您上一次修改每日可工作时间在1个月之前, 是否需要修改可工作时间</div>",type:"standard"},function(n){n&&(window.location.href="/setting/work")});alert("您已登上程序员首页，1分钟后生效。")}else-100==t.status?($(n).html("已Ping"),$(n).addClass("busy").attr("data-content","今天您已经 Ping 过啦，明天可以继续提醒我们 :)")):($(n).addClass("busy").attr("data-content",t.info),alert(t.info))},error:function(n){n.info&&$Inn.alert(n.info)}})})},getCaptchaImage:function(){$("body").on("click","#J_Captcha",function(){$(this).find("img").attr("src","/api/captcha/image?_"+Math.floor(1e7*Math.random()))})},initRating:function(){$(".ui.rating").rating({maxRating:5}),$(".ui.rating.disable").rating("disable")},showLogin:function(){-1!=window.location.href.indexOf("loginbox=show")&&$(function(){$(".ajax_login_btn").trigger("click")})},initInnFunction:function(){"function"==typeof window.innFunction&&window.innFunction()}}).init()}();